(this.webpackJsonpphonebook_frontend=this.webpackJsonpphonebook_frontend||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),a=t.n(c),r=t(3),o=t(2),u=t(0),i=function(e){return Object(u.jsxs)("div",{children:["Filter shown names with:  ",Object(u.jsx)("input",{value:e.newFilter,onChange:e.handleFilterChange})]})},d=function(e){return Object(u.jsxs)("form",{onSubmit:e.addNameAndNumber,children:[Object(u.jsxs)("div",{children:["Name: ",Object(u.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(u.jsxs)("div",{children:["Number: ",Object(u.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"Add"})})]})},s=function(e){var n=e.person,t=e.handleClickWithConfirm;return Object(u.jsxs)("div",{children:[n.name," ",n.number,"  ",Object(u.jsx)("button",{onClick:t,children:"Delete"})]})},l=t(4),b=t.n(l),h="/api/persons",j={getAll:function(){return b.a.get(h).then((function(e){return e.data}))},create:function(e){return b.a.post(h,e).then((function(e){return e.data}))},del:function(e){b.a.delete("/api/persons/delete/".concat("".concat(e)))},update:function(e,n){b.a.put(h.concat("/".concat(e)),n)}},f=function(e){var n=e.message;return null===n?null:Object(u.jsx)("div",{className:"error",children:n})},m=(t(38),function(){var e=Object(o.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],a=Object(o.useState)(""),l=Object(r.a)(a,2),b=l[0],h=l[1],m=Object(o.useState)(""),O=Object(r.a)(m,2),p=O[0],v=O[1],x=Object(o.useState)(""),w=Object(r.a)(x,2),g=w[0],N=w[1],C=Object(o.useState)(""),k=Object(r.a)(C,1)[0],y=Object(o.useState)(null),A=Object(r.a)(y,2),S=A[0],F=A[1];Object(o.useEffect)((function(){j.getAll().then((function(e){c(e)}))}),[]);var D=k?t:t.filter((function(e){return e.name.toLowerCase().includes(g.toLowerCase())}));return Object(u.jsxs)("div",{children:[Object(u.jsx)(f,{message:S}),Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(i,{newFilter:g,handleFilterChange:function(e){N(e.target.value)}}),Object(u.jsx)("h3",{children:"Add a new"}),Object(u.jsx)(d,{addNameAndNumber:function(e){e.preventDefault();var n={key:b,name:b,number:p},a=[],r=!1;if(t.map((function(e){return a.push(e.name)})),-1===a.indexOf(b)?(j.create(n).then((function(e){c(t.concat(e)),F("".concat(b," added to the phonebook!"))})).catch((function(e){F(e.response.data.error)})),setTimeout((function(){F(null)}),3e3)):r=window.confirm("".concat(b," has already been added to the phonebook. Replace the old number with a new one?")),r){var o=t[a.indexOf(b)],u=o.id;o.number=p,console.log(o),j.update(u,{name:b,number:p}),F("Number for ".concat(b," was succesfully changed!")),setTimeout((function(){F(null)}),3e3)}h(""),v("")},newName:b,handleNameChange:function(e){h(e.target.value)},newNumber:p,handleNumberChange:function(e){v(e.target.value)}}),Object(u.jsx)("h3",{children:"Numbers"}),D.map((function(e){return Object(u.jsx)(s,{person:e,id:e.id,handleClickWithConfirm:function(){return n=e.name,a=e.id,void(window.confirm("Are you sure you want to delete ".concat(n,"?"))&&(j.del(a),c(t.filter((function(e){return e.id!==a})))));var n,a}},e.name)}))]})});a.a.render(Object(u.jsx)(m,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.30c8e9c4.chunk.js.map